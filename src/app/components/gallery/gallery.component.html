<fs-gallery-header
  class="gallery-header"
  [allowedFiles]="config.allowedFiles"
  [filterConfig]="config.filterConfig"
  [zoom]="config.zoom"
  [upload]="config.upload"
  *ngIf="config.toolbar!==false">
</fs-gallery-header>

<!-- Groups mode -->
<ng-container *ngIf="config.groupsMode; else notGroupsMode">
  <ng-container *ngIf="data$ | async as groups ">
    <div class="wrapper fs-gallery-reorder-enabled"
         dragula="GROUPS"
         [dragulaModel]="groups"
         (dragulaModelChange)="orderChange($event, true)"
    >
      <ng-container *ngFor="let group of groups">
        <fs-gallery-group [ngClass]="{ 'drop-locked': group.locked }" [group]="group">
        </fs-gallery-group>
      </ng-container>
    </div>
  </ng-container>
</ng-container>


<!-- Simple gallery mode -->
<ng-template #notGroupsMode>
  <div
    *ngIf="reorderEnabled"
    [class]="'fs-gallery-reorder-enabled fs-gallery-thumbnails zoom-size-' + galleryService.imageZoomInteger + ' layout-' + galleryService.config.layout"
    [dragula]="galleryService.dragName"
    [dragulaModel]="data$ | async"
    (dragulaModelChange)="orderChange($event, true)">
    <ng-container *ngTemplateOutlet="thumbnailsTemplate"></ng-container>
  </div>

  <div
    *ngIf="!reorderEnabled"
    [class]="'fs-gallery-thumbnails zoom-size-' + galleryService.imageZoomInteger + ' layout-' + galleryService.config.layout">
    <ng-container *ngTemplateOutlet="thumbnailsTemplate"></ng-container>
  </div>

  <ng-template #thumbnailsTemplate>
    <fs-gallery-thumbnail
      *ngFor="let item of data$ | async"
      #fsGalleryThumbnail
      [data]="item">
    </fs-gallery-thumbnail>
  </ng-template>
</ng-template>
